<div class="lots-container">
  <nav>
    <%= will_paginate @lands, class:'pagination justify-content-center' %>
  </nav><br />
<% @lands.each do |land| %>
  <div class="exclusive-lot">
      <div class="row"><div class="col">
        <h3 class="lot-card-title">
          <% if land.model? %>
            <%= "#{land.model} @ " %>
          <% end %>
          <%= land.address %>
          <% if admin_signed_in? %>
          <%= link_to 'Edit', edit_land_path(land), class: 'btn btn-warning' %>
          <% end %>
        </h3>
      </div></div>
      <div class="row lot-image-map">
        <div class="col">
          <% if land.images.attached? %>
            <!-- Begin Lot Images Carousel -->
            <% carousel_id = "lotCardCarousel-#{land.id}" %>
            <div id='<%= carousel_id %>' class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <%= image_tag land.images.first, class: 'd-block w-100', active: true, alt: "#{land.address}" %>
                </div>
                <% land.images.all.offset(1).each do |image| %>
                  <div class="carousel-item">
                    <%= image_tag image, class: 'd-block w-100', alt: "#{land.address}" %>
                  </div>
                <% end %>
              </div>
              <a class="carousel-control-prev" href='#<%= "#{carousel_id}" %>' role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href='#<%= "#{carousel_id}" %>' role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
            </div>
            <!-- End Lot Images Carousel -->
          <% end %>
        </div>
        <% if land.location_mapframe? %>
          <div class="lot-iframe-container col">
            <div>
              <iframe class="lot-location-iframe" frameborder="0" style="border:0" src='<%= land.location_mapframe %>' allowfullscreen></iframe>
            </div>
          </div>
        <% end %>
      </div>
      <div class="row ready-lot-info">
        <div class="col">
          <b>Address</b> <%= land.address %>
        </div>
        <div class="col">
          <b>Neighborhood</b> <%= land.neighborhood.name %>
        </div>
      </div>
      <% if land.bedrooms? %>
      <div class="row house-details-container">
        <div class="col">
          <div class="row house-detail-row">
            <div class="col"><%= land.bedrooms %> BR</div>
            <% if land.bathrooms? %>
              <div class="col"><%= land.bathrooms %> BA</div>
            <% end %>
            <% if land.sqft? %>
              <div class="col house-detail-sqft"><%= land.sqft %> Sq Ft</div>
            <% end %>
          </div>
        </div>
        <% if land.pricing? %>
        <div class="col">
          <div class="row house-detail-row">
            <div class="col">Price Range:</div>
            <div class="col"><%= land.pricing %></div>
          </div>
        </div>
        <% end %>
      </div>
      <% end %>
      <div class="row">
        <div class="col" style="margin-top: 1em;">
          <strong>Let us know what you think</strong> (so we can design and build a home that suits you)
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="row house-detail-row" style="background-color: #E5E5E5; margin-bottom: -2em;">
            <p style="width: 100%; text-align: center;"><button type="button" data-toggle="tooltip" data-placement="right" title="Select the buttons below to indicate your preference. Your choices help inform our designs." style="padding: 0; background-color: transparent; margin-right: 1em;"><i class="fas fa-info-circle"></i></button>I like the:</p>
          </div>
          <div class="row house-detail-row" style='margin-top: 0; background-color: #E5E5E5;'>
            <% @feedback_options.each do |option|
                active = ''
                ulf = UserLandFeedback.where(["user_id = ? and land_id = ? and feedback_id = ?", @current, land, option ]).first
              if ulf && ulf.active?
                active = 'active'
              end
            %>
            <div class="col lot-likes-container">
              <%= link_to user_land_feedbacks_toggleActive_path(:land => land, :feedback_option => option), remote: true do %>
                <button class='btn lot-likes-btn <%= "#{active}" %>' data-toggle="button" onclick='
                  this.classList.toggle("active");' aria-pressed="false">
                  <i class='fas <%= option.icon_class %>'></i> <%= option.name %></button>
              <% end %>
            </div>
            <% end %>
          </div>
          <div class="row house-detail-row">
            <div class="col">
              <% contact_form = ContactForm.new(name: "#{@current.first_name} #{@current.last_name}", email: @current.email, lot_address: land.address) %>
              <%= render 'contact_forms/new', land: land %>
            </div>
          </div>
        </div>
      </div>
    </div>
<% end %>
<br />
<nav>
  <%= will_paginate @lands, class:'pagination justify-content-center' %>
</nav>
</div>
